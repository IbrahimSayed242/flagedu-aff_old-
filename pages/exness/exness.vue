<template>
  <div
    class="d-flex justify-content-center"
    dir="rtl"
    style="
      background-color: #141313;
      height: auto;
      padding: 55px 0px;
      padding-bottom: 0px;
      background-size: cover;
    "
  >
    <div class="container p-5 m-5">
      <div class="row">
        <div
          class="col-lg-5 col-md-8 col-sm-12 col-xs-12 text-right pull-right text-end"
        >
          <h1 class="text-light my-5">
            <strong
              >هل تتطلع إلى الاستمتاع بأفضل الشروط للتداول في الأسهم؟</strong
            >
          </h1>

          <h4 class="text-light my-5">
            استفد من أفضل شروط في السوق عند التداول في الأوراق المالية والأسهم
            الأكثر رواجًا مع Exness!
          </h4>

          <a class="btn btn-warning p-3" href="#form">استمتع بالتجربة الآن </a>
        </div>
        <img
          class="col-lg-7 col-md-12 col-sm-12 col-xs-12"
          src="https://api.flagedu.com/media/images/2c83ab6a-en-0722-trade-stocks-1200x627-2_10sj0e.original.png"
          width="100%"
        />
      </div>

      <div class="row">
        <div class="col-lg-3 col-md-6 col-sm-12 my-3">
          <div class="text-light fs-5 p-2" style="overflow: hidden">
            <img
              width="30%"
              src="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_101e01e000000000000000.png"
              alt=""
              data-src-desktop-1x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_101e01e000000000000000.png"
              data-src-desktop-2x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_102s02s000000000000000.png"
              data-src-desktop-3x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_1046046000000000000000.png"
              data-src-mobile-1x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_101e01e000000000000000.png"
              data-src-mobile-2x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_102s02s000000000000000.png"
              data-src-mobile-3x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_1046046000000000000000.png"
              srcset="
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_101e01e000000000000000.png 1x,
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_102s02s000000000000000.png 2x,
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/b4173049-lightning-instant_1046046000000000000000.png 3x
              "
            />
            التنفيذ السريع
          </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 my-3">
          <div class="text-light fs-5 p-2" style="overflow: hidden">
            <img
              width="30%"
              src="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_101e01e000000000000000.png"
              alt=""
              data-src-desktop-1x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_101e01e000000000000000.png"
              data-src-desktop-2x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_102s02s000000000000000.png"
              data-src-desktop-3x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_1046046000000000000000.png"
              data-src-mobile-1x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_101e01e000000000000000.png"
              data-src-mobile-2x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_102s02s000000000000000.png"
              data-src-mobile-3x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_1046046000000000000000.png"
              srcset="
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_101e01e000000000000000.png 1x,
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_102s02s000000000000000.png 2x,
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/2c1419dd-shield-protection_1046046000000000000000.png 3x
              "
            />
            معدلات اسبريد ثابتة
          </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 my-3">
          <div class="text-light fs-5 p-2" style="overflow: hidden">
            <img
              width="30%"
              src="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_101e01e000000000000000.png"
              alt=""
              data-src-desktop-1x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_101e01e000000000000000.png"
              data-src-desktop-2x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_102s02s000000000000000.png"
              data-src-desktop-3x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_1046046000000000000000.png"
              data-src-mobile-1x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_101e01e000000000000000.png"
              data-src-mobile-2x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_102s02s000000000000000.png"
              data-src-mobile-3x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_1046046000000000000000.png"
              srcset="
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_101e01e000000000000000.png 1x,
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_102s02s000000000000000.png 2x,
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/3dec9e0c-cards_1046046000000000000000.png 3x
              "
            />
            عمليات سحب فورية
          </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 my-3">
          <div class="text-light fs-5 p-2" style="overflow: hidden">
            <img
              width="30%"
              src="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_101e01e000000000000000.png"
              alt=""
              data-src-desktop-1x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_101e01e000000000000000.png"
              data-src-desktop-2x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_102s02s000000000000000.png"
              data-src-desktop-3x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_1046046000000000000000.png"
              data-src-mobile-1x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_101e01e000000000000000.png"
              data-src-mobile-2x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_102s02s000000000000000.png"
              data-src-mobile-3x="//d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_1046046000000000000000.png"
              srcset="
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_101e01e000000000000000.png 1x,
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_102s02s000000000000000.png 2x,
                //d9hhrg4mnvzow.cloudfront.net/www.exnesspromo.com/ar/trade_assets-stocks/7d6e44f6-flag_1046046000000000000000.png 3x
              "
            />
            دون أي عمولات
          </div>
        </div>
      </div>

      <div class="row d-flex justify-content-center my-5">
        <div class="col-lg-5 col-md-8 col-sm-12 col-xs-12">
          <h1 class="text-light my-5">تداول في أسهم الشركات العالمية!</h1>
          <p class="text-light fs-5">
            بفضل شروط السوق الرائدة التي نقدمها للتداول في الأوراق المالية
            الأكثر رواجًا، ستصادف فرص التداول التي تبحث عنها!
          </p>
        </div>

        <div class="col-lg-4 col-md-8 col-sm-12 col-xs-12">
          <div class="bg-light rounded py-5 px-4">
            <img
              class="text-center mx-5"
              src=" https://api.flagedu.com/media/images/Exness-Logo.original.png"
              style="width: 70%; text-align: center"
            />

            <form @submit.prevent="handleFormSubmit" id="form">
              <div class="form-input">
                <input
                  v-model="formData.firstName"
                  type="text"
                  placeholder="الاسم"
                />
              </div>
              <div class="form-input">
                <input
                  v-model="formData.lastName"
                  type="text"
                  placeholder="اسم العائله"
                />
              </div>
              <div class="form-input">
                <input
                  v-model="formData.email"
                  type="email"
                  placeholder="البريد الالكتروني"
                />
              </div>
              <div class="form-input">
                <input
                  name="phone"
                  v-model="formData.phone"
                  type="phone"
                  placeholder="رقم الهاتف"
                  class="phone"
                />
              </div>

              <div class="form-input">
                <input
                  v-model="formData.password"
                  type="password"
                  placeholder="الرقم السري "
                />
              </div>
              <div class="form-input">
                <input type="text" placeholder="قسيمة (اختياري)" />
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="flexCheckDefault"
                  v-model="formData.usa_citizen"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  USA Citizen
                </label>
              </div>
              <div class="form-input err-msg-container">
                <div
                  class=""
                  v-for="(item, idx) in err_msg"
                  :key="'error_' + idx"
                >
                  * {{ item }}
                </div>
              </div>
              <div class="form-input">
                <button class="btn btn-warning" type="submit">تسجيل</button>
              </div>
            </form>
          </div>
        </div>

        <div class="container-lg">
          <div class="row d-flex justify-content-center">
            <div class="col-12 text-light text-right p-5">
              <h1 class="text-center">نعرف ما يشغل بالك</h1>
              <p class="text-center m-4">
                في Exness، نقدم أفضل شروط ممكنة للتداول في العملات الرقمية
                والأصول الأخرى، مما يمنحك راحة البال التي تحتاج إليها للتركيز
                على الأسواق
              </p>
            </div>
            <div
              class="col-lg-3 col-md-5 col-sm-5 col-xs-12 rounded bg-cards text-light text-center m-3"
            >
              <h5 class="p-3">دعم على مدار الساعة</h5>
              <img
                src="https://api.flagedu.com/media/images/exness_3.original.png"
                width="75%"
                height="75%"
                class="img-card"
              />
            </div>

            <div
              class="col-lg-3 col-md-5 col-sm-5 col-xs-12 rounded bg-cards text-light text-center m-3"
            >
              <h5 class="p-3">طرق الدفع المحلية</h5>
              <img
                src="https://api.flagedu.com/media/images/exness_2.original.png"
                width="70%"
                height="75%"
                class="img-card"
              />
            </div>

            <div
              class="col-lg-3 col-md-5 col-sm-5 col-xs-12 rounded bg-cards text-light text-center m-3"
            >
              <h5 class="p-3">معاملات سحب فورية</h5>
              <img
                src="https://api.flagedu.com/media/images/exness_1.original.png"
                width="80%"
                height="75%"
                class="img-card"
              />
            </div>

            <div
              class="col-lg-3 col-md-5 col-sm-5 col-xs-12 rounded bg-cards text-light text-center m-3"
            >
              <h5 class="p-3">أسعار مستقرة</h5>
              <img
                src="https://api.flagedu.com/media/images/exness_4.original.png"
                width="105%"
                height="75%"
                class="img-card"
              />
            </div>

            <div
              class="col-lg-3 col-md-5 col-sm-5 col-xs-12 rounded bg-cards text-light text-center m-3"
            >
              <h5 class="p-3">تنفيذ سريع وموثوق به</h5>
              <img
                src="https://api.flagedu.com/media/images/exness.original.png"
                width="80%"
                height="75%"
                class="img-card"
              />
            </div>

            <div
              class="col-lg-3 col-md-5 col-sm-5 col-xs-12 rounded bg-cards text-light text-center m-3"
            >
              <h5 class="p-3">حسابات إسلامية للجميع</h5>
              <img
                src="https://api.flagedu.com/media/images/exness_5.original.png"
                width="80%"
                height="75%"
                class="img-card"
              />
            </div>
          </div>

          <div class="row my-5 py-5">
            <div class="col-lg-6 col-md-12 text-light text-right p-5">
              <h1 class="text-center">تابع أحدث حركات الأسواق أولاً بأول</h1>
              <p class="text-center m-4">
                في Exness، نقدم أفضل شروط ممكنة للتداول في العملات الرقمية
                والأصول الأخرى، مما يمنحك راحة البال التي تحتاج إليها للتركيز
                على الأسواق
              </p>
            </div>
            <img
              class="col-lg-6 col-md-12"
              src="https://api.flagedu.com/media/images/exness7.original.png"
            />
          </div>
        </div>
      </div>
      <footer class="row">
        <div>
          <p class="text-right text-light">
            شركة Nymstar Limited شركة لتداول الأوراق المالية مُسجَّلة في سيشيل
            برقم (8423606-1)، ومصرَّح لها بمزاولة أعمالها بموجب الترخيص رقم
            (SD025) الصادر من هيئة الخدمات المالية (Financial Services
            Authority) في سيشيل. ويقع مكتب شركة Nymstar Limited المُسجَّل في
            العنوان: F20, 1st floor, Eden Plaza, Eden Island, Seychelles. وشركة
            Nymstar Limited مُخوَّلة قانونًا بالعمل تحت المُسمَّى التجاري لشركة
            Exness وعلاماتها التجارية. يتم إدارة هذه الحملة بواسطة
            www.exness.com. ينطوي الاستثمار على قدرٍ كبيرٍ من المخاطرة، وقد لا
            يكون من ثَمَّ مناسبًا لجميع المستثمرين؛ فقيمة الاستثمار عُرضة
            للزيادة أو النقص، وقد يخسر المُستثمِر من ثَمَّ رأسماله الذي استثمره
            كله. ولا تتحمل الشركة، بأي حال من الأحوال، أي مسؤولية تجاه أي شخصٍ
            أو كيان بعينه عن أي خسارة أو ضرر، كُلِّيًّا كان أو جزئيًّا، مما قد
            يقع بسبب أي معاملة من المعاملات المتعلقة بالاستثمار، أو مما ينجم
            عنها، أو يتصل بها.
          </p>
          <p class="text-center text-light">
            © 2008—2023.<a class="link-light" href="#form"> Exness</a>
          </p>
        </div>
      </footer>
    </div>
  </div>
</template>

<script>
import { Component, Vue, Action } from "nuxt-property-decorator";
import { namespaced } from "../../utils/utils";
import { NS_THIRD_PARTY, NS_COMMON } from "../../utils/store/namespace.names";
import {
  EVEST_SIGNUP,
  EXNESS_SIGNUP,
  FETCH_CREATIVE_DETAILS,
} from "../../utils/store/action.names";

@Component({
  name: "ExnessStyled",
  components: {},
  layout: "page-layout",
})
export default class ExnessStyled extends Vue {
  @Action(namespaced(NS_THIRD_PARTY, EXNESS_SIGNUP)) exnessSignup;
  @Action(namespaced(NS_COMMON, FETCH_CREATIVE_DETAILS)) fetchCreativeDetails;

  formData = {
    email: "",
    password: "",
    usa_citizen: false,
    ci: "",
    uai: "",
    ani: "",
    firstName: "",
    interest: "Exness",
    phone: "",
    coupon: "",
    lastName: "",
  };
  err_msg = [];

  handleSelectedCountry({ name, iso2, dialCode }) {
    this.formData.country = iso2;
  }

  handleFormSubmit() {
    this.err_msg = [];

    if (this.formData["usa_citizen"] == true) {
      this.err_msg.push("USA citizen not allowed to signup!");
      return false;
    }
    var regularExpression =
      /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*\W)(?!.* ).{8,16}$/;
    if (regularExpression.test(this.formData["password"]) == false) {
      this.err_msg.push("Password not in correct format!");
      return false;
    }

    this.formData["user_ip"] = this.user_ip;
    this.exnessSignup(this.formData)
      .then((d) => {
        console.log(d);
        var loginUrl = d.login_url;
        location.href = loginUrl;
        // this.$router.push({
        //   name: "thank-you",
        //   query: { redirect_uri: loginUrl },
        // });
      })
      .catch((e) => {
        this.err_msg = [];
        if (e.response.status === 400) {
          console.log(e.response.data);
          for (const [key, value] of Object.entries(e.response.data)) {
            this.err_msg.push(value);
          }
        } else {
          var msg = `<div class='t-custom-class'><div>Something went wrong!</div></div>`;
          this.$toast.error(msg);
        }
      });
  }

  async asyncData({ route, $axios, store, error, req }) {
    var user_ip = "104.28.198.135";
    if (process.server) {
      const headers = req && req.headers ? Object.assign({}, req.headers) : {};
      if (headers["x-forwarded-for"]) {
        user_ip = headers["x-forwarded-for"];
      }
    }

    var brand = "exness";
    var creative_name = "Exness Styled";
    var ci = null;

    const getCreative = await store
      .dispatch(namespaced(NS_COMMON, FETCH_CREATIVE_DETAILS), {
        brand: brand,
        creative_name: creative_name,
      })
      .then((data) => {
        ci = data.id;
      })
      .catch((e) => {});

    return { ci, user_ip };
  }
  head() {
    return {
      title: "Exness",

      script: [
        {
          src: "https://analytics.tiktok.com/i18n/pixel/events.js",
          async: true,
        },
        {
          hid: "tiktok-analytics",
          innerHTML: `
          !function (w, d, t) {
            w.TiktokAnalyticsObject=t;
            var ttq=w[t]=w[t]||[];
            ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"];
            ttq.setAndDefer=function(t,e){
              t[e]=function(){
                t.push([e].concat(Array.prototype.slice.call(arguments,0)))
              }
            };
            for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);
            ttq.instance=function(t){
              for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);
              return e
            };
            ttq.load=function(e,n){
              var i="https://analytics.tiktok.com/i18n/pixel/events.js";
              ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};
              var o=document.createElement("script");
              o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;
              var a=document.getElementsByTagName("script")[0];
              a.parentNode.insertBefore(o,a)
            };
            ttq.load('CKIJ5CRC77UFTHK7CPP0');
            ttq.page();
          }(window, document, 'ttq');
        `,
        },
      ],
    };
  }
  mounted() {
    this.formData.ci = this.$route.query.ci ? this.$route.query.ci : null;
    if (!this.formData.ci || this.formData.ci != this.ci) {
      this.formData.ci = this.ci;
    }
    this.formData.uai = this.$route.query.uai ? this.$route.query.uai : null;
    this.formData.ani = this.$route.query.ani ? this.$route.query.ani : null;
  }
}
</script>
<style scoped lang="scss">
* {
  font-family: "Tajawal";
}

form {
  display: flex;
  flex-direction: column;
  gap: 15px;
  align-items: center;
  justify-content: center;

  .form-input {
    display: flex;
    flex-direction: column;
    gap: 10px;

    input {
      height: 40px;
      width: 280px;
      padding-right: 10px;
    }
  }

  .err-msg-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    color: red;
  }
}

@media screen and (max-width: 480px) {
  form {
    .form-input input {
      height: 40px;
      width: 200px;
      padding-right: 10px;
    }
  }
}

.bg-cards {
  background-color: #1d1d20;
}

.img-card {
  height: 75%;
}

@media screen and (max-width: 1209px) {
  .img-card {
    height: 65%;
  }
}

@media screen and (max-width: 768px) {
  .img-card {
    height: 55%;
  }
}

@media screen and (max-width: 575px) {
  .img-card {
    height: 72%;
  }
}
</style>
